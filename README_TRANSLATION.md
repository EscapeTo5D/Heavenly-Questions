# 有道翻译API配置指南

本应用使用有道智云翻译API来翻译NASA每日一图的标题和内容。本应用已包含一个有效的有道翻译API密钥，您可以直接使用，也可以替换为自己的密钥。

## 当前翻译状态

已配置一个有效的有道智云翻译API密钥，可直接使用。如果您遇到翻译问题，请检查日志输出中是否有错误信息，错误信息通常以"有道翻译"或"翻译错误"开头。

## 申请自己的有道智云应用ID和密钥（可选）

如果您想使用自己的API密钥，可以按以下步骤操作：

1. 访问[有道智云官网](https://ai.youdao.com/)并注册账号
2. 登录后，进入控制台
3. 创建一个新的自然语言翻译应用（选择"文本翻译"服务）
4. 获取应用ID（AppKey）和应用密钥（AppSecret）

## 配置应用

1. 打开`lib/services/translate_service.dart`文件
2. 将以下两行中的值替换为您获取的应用ID和密钥：

```dart
static const String _appKey = "0de3e4a7b32705a0";
static const String _appSecret = "s39ySLHDFNpxClwpHBjggsX394DqV1LL";
```

3. 保存文件并重新构建应用

## 翻译API说明

有道翻译API支持多种语言之间的互译。默认配置是将自动检测源语言（auto）并翻译为简体中文（zh-CHS）。

### 支持的主要语言代码

- `zh-CHS`：简体中文
- `zh-CHT`：繁体中文
- `en`：英语
- `ja`：日语
- `ko`：韩语
- `fr`：法语
- `es`：西班牙语
- `pt`：葡萄牙语
- `it`：意大利语
- `ru`：俄语
- `vi`：越南语
- `de`：德语
- `ar`：阿拉伯语
- `auto`：自动检测

如果需要更改源语言或目标语言，可以修改`nasa_service.dart`文件中的`_translateApod`方法：

```dart
final results = await _translateService.batchTranslate(
  [apod.title, apod.explanation],
  from: 'auto',  // 源语言
  to: 'zh-CHS'  // 目标语言
);
```

## 翻译提示和问题排查

1. **长文本翻译**：有道API对单次翻译文本长度有限制，应用已实现自动拆分处理长文本
   
2. **翻译失败**：翻译失败时，应用会自动回退到显示原文，不会影响应用正常使用

3. **常见问题排查**：
   - 检查网络连接是否正常
   - 查看应用日志中的"有道翻译响应体"信息，了解具体错误原因
   - 确认API密钥是否仍然有效
   - 检查每日API调用次数是否已超限

4. **错误代码参考**：
   - `101`: 缺少必填参数
   - `102`: 不支持的语言类型
   - `108`: 应用ID无效
   - `202`: 签名检验失败
   - `401`: 账户已欠费
   - `411`: 访问频率受限

## 流量限制

请注意，有道智云翻译API对免费用户有每日翻译字符数的限制（通常为100万字符/天）。请关注您的使用情况，避免超出限制。 